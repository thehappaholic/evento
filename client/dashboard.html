<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard | Evento</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@400;600;700&display=swap" rel="stylesheet" />
</head>
<body>
  <div class="dashboard-wrapper">

    <!-- Sidebar Navigation (Desktop) -->
    <aside class="sidebar">
      <img src="images/evento-logo.svg" alt="Evento Logo" class="sidebar-logo" />
      <div class="nav-icons">
        <a href="dashboard.html" title="Home">
          <img src="images/home.png" alt="Home" />
        </a>
        <a href="explore.html" title="Discover">
          <img src="images/compass.png" alt="Discover" />
        </a>
        <a href="create-event.html" title="Create Event">
          <img src="images/plus.png" alt="Create" />
        </a>
        <a href="notifications.html" title="Notifications">
          <img src="images/notification-bell.png" alt="Notifications" />
        </a>
        <a href="customer-support.html" title="Support">
          <img src="images/customer-support.png" alt="Support" />
        </a>
      </div>
    </aside>

    <!-- Main Dashboard Area -->
    <main class="dashboard">

      <!-- Topbar -->
      <header class="dashboard-header">
        <input type="text" class="search-bar" placeholder="Search events..." />
        <a href="profile.html" title="Profile">
          <img src="images/user.png" alt="User Icon" class="profile-icon" />
        </a>
      </header>

      <!-- Welcome + Tabs -->
      <section class="welcome">
        <h1>Hello <span id="userName">Explorer</span> üëã</h1>
        <div class="tabs">
          <button class="tab active">Popular</button>
          <button class="tab">For You</button>
        </div>
      </section>

      <section>
  <h2>My Bookings</h2>
  <div id="myBookings"></div>
</section>

<section>
  <h2>My Hosted Events</h2>
  <div id="myHosted"></div>
</section>


      <!-- Main Content Grid -->
      <section class="event-grid">
        <!-- Sample Event Cards -->
        <div class="event-card">
          <img src="https://via.placeholder.com/300x160" alt="Event Image" />
          <h3>Startup Meetup</h3>
          <p class="meta">üìç Bengaluru | üóìÔ∏è Aug 25</p>
          <p class="desc">Meet fellow builders and investors under one roof.</p>
          <div class="tags">
            <span>Networking</span>
            <span>Offline</span>
          </div>
        </div>

        <div class="event-card">
          <img src="https://via.placeholder.com/300x160" alt="Event Image" />
          <h3>AI & Design</h3>
          <p class="meta">üìç Online | üóìÔ∏è Sep 10</p>
          <p class="desc">A hands-on workshop exploring the synergy of AI + UX.</p>
          <div class="tags">
            <span>Workshop</span>
            <span>Online</span>
          </div>
        </div>

        <!-- More cards can be appended via JS -->
      </section>
    </main>
  </div>

  <!-- Bottom Navigation (Mobile) -->
  <nav class="bottom-nav">
    <a href="dashboard.html" title="Home">
      <img src="images/home.png" alt="Home" />
    </a>
    <a href="explore.html" title="Discover">
      <img src="images/compass.png" alt="Discover" />
    </a>
    <a href="create-event.html" title="Create Event" class="create-btn">
      <img src="images/plus.png" alt="Create" />
    </a>
    <a href="notifications.html" title="Notifications">
      <img src="images/notification-bell.png" alt="Notifications" />
    </a>
    <a href="customer-support.html" title="Support">
      <img src="images/customer-support.png" alt="Support" />
    </a>
  </nav>

  <script>
    // Dynamic greeting from localStorage/session or future API
    const name = localStorage.getItem('userName') || 'Explorer';
    document.getElementById('userName').textContent = name;
  </script>

  <script type="module">
  import { apiGet } from './js/api.js';

  (async function(){
    // My bookings
    try{
      const my = await apiGet('/api/bookings/my');
      if(my.success){
        const box = document.querySelector('#myBookings');
        box.innerHTML = (my.data||[]).map(b => `
          <div class="booking-row">
            <a href="event.html?id=${b.event?._id}">${b.event?.title || 'Event'}</a>
            <div>${new Date(b.createdAt).toLocaleString()}</div>
          </div>`).join('') || '<p>No bookings yet</p>';
      }
    }catch(e){}

    // Hosted by me (option A: server supports ?hostedBy=me)
    try{
      const evs = await apiGet('/api/events?hostedBy=me');
      if(evs.success){
        const box = document.querySelector('#myHosted');
        box.innerHTML = (evs.data||[]).map(ev=>`
          <div class="event-row">
            <a href="event.html?id=${ev._id}">${ev.title}</a>
            <span>${new Date(ev.date).toLocaleDateString()}</span>
          </div>
        `).join('') || '<p>No events hosted yet</p>';
      }
    }catch(e){}
  })();
</script>

</body>
</html>